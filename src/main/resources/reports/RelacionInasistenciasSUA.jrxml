<?xml version="1.0" encoding="UTF-8"?>
<!-- Created with Jaspersoft Studio version 6.20.0.final using JasperReports Library version 6.20.0-2bc7ab61c56f459e8176eb05c7705e145cd400ad  -->
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="RelacionInasistenciasSUA" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="d2c66c01-ec28-4322-8bc5-bd602fa77385">
	<property name="com.jaspersoft.studio.data.sql.tables" value=""/>
	<property name="com.jaspersoft.studio.data.defaultdataadapter" value="Remote Database"/>
	<parameter name="fechaInicio" class="java.lang.String"/>
	<parameter name="fechaFin" class="java.lang.String"/>
	<parameter name="urlImg" class="java.lang.String"/>
	<queryString language="SQL">
		<![CDATA[SELECT 
  CatExpe.numero_expediente,
  Per.nombre,
  Per.apellido_paterno,
  Per.apellido_materno,
  Per.num_imss,
  Inci.fecha_inicio,
  CatInci.descripcion
FROM incidencias AS Inci
JOIN trabajador AS Trab ON Inci.trabajador_id = id_trabajador
JOIN persona AS Per ON Trab.persona_id = id_persona
JOIN catalogo_expedientes AS CatExpe ON Trab.expediente_id = id_expediente
JOIN catalogo_incidencias AS CatInci ON Inci.incidencia_id = CatInci.id_incidencia
WHERE (Inci.incidencia_id = 1 OR Inci.incidencia_id = 2 OR Inci.incidencia_id = 9 OR Inci.incidencia_id = 19)
  AND Inci.fecha_inicio >=  TO_TIMESTAMP($P{fechaInicio}, 'YYYY-MM-DD HH:MI:SS')
  AND Inci.fecha_inicio <= TO_TIMESTAMP($P{fechaFin}, 'YYYY-MM-DD HH:MI:SS')
ORDER BY CatExpe.numero_expediente]]>
	</queryString>
	<field name="numero_expediente" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="numero_expediente"/>
		<property name="com.jaspersoft.studio.field.label" value="numero_expediente"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="catalogo_expedientes"/>
	</field>
	<field name="nombre" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="nombre"/>
		<property name="com.jaspersoft.studio.field.label" value="nombre"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="persona"/>
	</field>
	<field name="apellido_paterno" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="apellido_paterno"/>
		<property name="com.jaspersoft.studio.field.label" value="apellido_paterno"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="persona"/>
	</field>
	<field name="apellido_materno" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="apellido_materno"/>
		<property name="com.jaspersoft.studio.field.label" value="apellido_materno"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="persona"/>
	</field>
	<field name="num_imss" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="num_imss"/>
		<property name="com.jaspersoft.studio.field.label" value="num_imss"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="persona"/>
	</field>
	<field name="fecha_inicio" class="java.sql.Timestamp">
		<property name="com.jaspersoft.studio.field.name" value="fecha_inicio"/>
		<property name="com.jaspersoft.studio.field.label" value="fecha_inicio"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="incidencias"/>
	</field>
	<field name="descripcion" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="descripcion"/>
		<property name="com.jaspersoft.studio.field.label" value="descripcion"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="catalogo_incidencias"/>
	</field>
	<variable name="cuentaTrabajadores" class="java.lang.Integer" incrementType="Group" incrementGroup="grupoTrabajadores" calculation="Count">
		<variableExpression><![CDATA[ $V{cuentaTrabajadores} == 1 ? ($V{cuentaTrabajadores} + 1) : $V{cuentaTrabajadores}]]></variableExpression>
		<initialValueExpression><![CDATA[1]]></initialValueExpression>
	</variable>
	<group name="grupoTrabajadores">
		<groupExpression><![CDATA[$F{numero_expediente}]]></groupExpression>
		<groupHeader>
			<band height="13">
				<textField>
					<reportElement x="0" y="0" width="40" height="13" uuid="28dc8e5f-acf9-4b83-9520-11fdacabe86b">
						<property name="com.jaspersoft.studio.unit.height" value="px"/>
					</reportElement>
					<textElement>
						<font fontName="Arial"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{numero_expediente}]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement x="40" y="0" width="160" height="13" uuid="297fe754-78d3-4944-83d8-0d11aa3b693e">
						<property name="com.jaspersoft.studio.unit.height" value="px"/>
					</reportElement>
					<textElement>
						<font fontName="Arial"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{nombre}+ " " +$F{apellido_paterno}+ " "+$F{apellido_materno}]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement x="200" y="0" width="206" height="13" uuid="e4c1987a-84fe-410d-98ff-f3969e4ef6b8">
						<property name="com.jaspersoft.studio.unit.height" value="px"/>
					</reportElement>
					<textElement>
						<font fontName="Arial"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{num_imss}]]></textFieldExpression>
				</textField>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="14">
				<textField>
					<reportElement x="65" y="0" width="172" height="13" uuid="59dc77df-88b7-437d-ae32-9109d877c70b">
						<property name="com.jaspersoft.studio.unit.height" value="px"/>
					</reportElement>
					<textElement>
						<font fontName="Arial"/>
					</textElement>
					<textFieldExpression><![CDATA["Inasistencias Reportadas:" + $V{grupoTrabajadores_COUNT}]]></textFieldExpression>
				</textField>
				<line>
					<reportElement x="0" y="13" width="556" height="1" uuid="083010fd-6c18-4e7b-a9ec-747be91a5b95">
						<property name="com.jaspersoft.studio.unit.height" value="px"/>
					</reportElement>
					<graphicElement>
						<pen lineStyle="Dashed" lineColor="#CCCCCC"/>
					</graphicElement>
				</line>
			</band>
		</groupFooter>
	</group>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="100" splitType="Stretch">
			<image>
				<reportElement x="0" y="0" width="220" height="40" uuid="9f20dc74-844a-49e2-90b6-0a452d52160b"/>
				<imageExpression><![CDATA[$P{urlImg}]]></imageExpression>
			</image>
			<staticText>
				<reportElement x="360" y="0" width="196" height="30" uuid="95495a04-2eff-4e29-ac66-6ed22bcde670"/>
				<textElement textAlignment="Right">
					<font fontName="Arial" isBold="true"/>
				</textElement>
				<text><![CDATA[Servicio de Transportes Eléctricos de la Ciudad de México]]></text>
			</staticText>
			<staticText>
				<reportElement x="410" y="24" width="146" height="12" uuid="de9f05ae-3ce1-4819-a7d3-cf21246a6236"/>
				<textElement textAlignment="Right">
					<font fontName="Arial" size="6"/>
				</textElement>
				<text><![CDATA[Gerencia de Administración de Personal	]]></text>
			</staticText>
			<staticText>
				<reportElement x="410" y="30" width="146" height="12" uuid="6c99e125-fd5c-4574-98d8-2a6cf6b9d7d8"/>
				<textElement textAlignment="Right">
					<font fontName="Arial" size="6"/>
				</textElement>
				<text><![CDATA[Subgerencia de Administración de Personal]]></text>
			</staticText>
			<textField>
				<reportElement x="90" y="50" width="380" height="16" uuid="736fe6a5-a435-40a7-9d5f-5622f7c094cc"/>
				<textElement textAlignment="Center">
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression><![CDATA["RELACIÓN DE INASISTENCIAS REGISTRADAS DEL " + $P{fechaInicio} + " AL " + $P{fechaFin}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="0" y="70" width="178" height="20" uuid="7baa78cc-4220-4347-b9c7-1aaa4e4ddac7"/>
				<textElement textAlignment="Center">
					<font fontName="Arial" isBold="true"/>
				</textElement>
				<text><![CDATA[REGISTRO PATRONAL 01080836 107]]></text>
			</staticText>
			<staticText>
				<reportElement x="0" y="80" width="178" height="20" uuid="629afbb2-c2cb-4d4a-b519-2c2c1c20d5dd"/>
				<textElement textAlignment="Left">
					<font fontName="Arial" isBold="true"/>
				</textElement>
				<text><![CDATA[R.F.C. STE560525DW5]]></text>
			</staticText>
			<textField>
				<reportElement x="390" y="80" width="166" height="20" uuid="95e5fcba-f58c-4d9a-9272-0c0b243beafa"/>
				<textElement>
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression><![CDATA[new SimpleDateFormat("EEEE, dd 'de' MMMM 'de' yyyy").format(new Date())
]]></textFieldExpression>
			</textField>
		</band>
	</title>
	<columnHeader>
		<band height="14" splitType="Stretch">
			<staticText>
				<reportElement x="407" y="0" width="70" height="13" uuid="5e5840ba-f13e-4d66-8c4c-cda5b6a16412">
					<property name="com.jaspersoft.studio.spreadsheet.connectionID" value="656fe4c1-4e4c-42bf-889d-c90d041a7c0a"/>
					<property name="com.jaspersoft.studio.unit.height" value="px"/>
				</reportElement>
				<textElement>
					<font fontName="Arial" isBold="true"/>
				</textElement>
				<text><![CDATA[Fecha Falta]]></text>
			</staticText>
			<staticText>
				<reportElement x="200" y="0" width="206" height="13" uuid="5bd48109-9f1d-4fd5-ac48-9fecf9170a5f">
					<property name="com.jaspersoft.studio.spreadsheet.connectionID" value="656fe4c1-4e4c-42bf-889d-c90d041a7c0a"/>
					<property name="com.jaspersoft.studio.unit.height" value="px"/>
				</reportElement>
				<textElement>
					<font fontName="Arial" isBold="true"/>
				</textElement>
				<text><![CDATA[No. Afiliación al IMSS]]></text>
			</staticText>
			<staticText>
				<reportElement x="40" y="0" width="160" height="13" uuid="cf6739c3-95e4-4229-8fe4-d424d7f8de4c">
					<property name="com.jaspersoft.studio.spreadsheet.connectionID" value="656fe4c1-4e4c-42bf-889d-c90d041a7c0a"/>
					<property name="com.jaspersoft.studio.unit.height" value="px"/>
				</reportElement>
				<textElement>
					<font fontName="Arial" isBold="true"/>
				</textElement>
				<text><![CDATA[Nombre del Trabajador]]></text>
			</staticText>
			<staticText>
				<reportElement x="0" y="0" width="40" height="13" uuid="0262d3a3-0b4b-4e24-a0ee-a0486ddd55ad">
					<property name="com.jaspersoft.studio.spreadsheet.connectionID" value="656fe4c1-4e4c-42bf-889d-c90d041a7c0a"/>
					<property name="com.jaspersoft.studio.unit.height" value="px"/>
				</reportElement>
				<textElement>
					<font fontName="Arial" isBold="true"/>
				</textElement>
				<text><![CDATA[Expdte.]]></text>
			</staticText>
			<staticText>
				<reportElement x="477" y="0" width="83" height="13" uuid="81085fb5-8d32-41a1-b912-46a0dc83fa2e">
					<property name="com.jaspersoft.studio.spreadsheet.connectionID" value="656fe4c1-4e4c-42bf-889d-c90d041a7c0a"/>
					<property name="com.jaspersoft.studio.unit.height" value="px"/>
				</reportElement>
				<textElement>
					<font fontName="Arial" isBold="true"/>
				</textElement>
				<text><![CDATA[Tipo Inasistencia]]></text>
			</staticText>
			<line>
				<reportElement x="0" y="13" width="560" height="1" uuid="e52539e7-648b-49be-b32e-017b78eddbad">
					<property name="com.jaspersoft.studio.unit.y" value="pixel"/>
					<property name="com.jaspersoft.studio.unit.height" value="px"/>
				</reportElement>
				<graphicElement>
					<pen lineWidth="0.5"/>
				</graphicElement>
			</line>
		</band>
	</columnHeader>
	<detail>
		<band height="13" splitType="Stretch">
			<textField>
				<reportElement x="407" y="0" width="70" height="13" uuid="e687d188-3e09-47f5-8bca-3cc2c8b519b7">
					<property name="com.jaspersoft.studio.spreadsheet.connectionID" value="656fe4c1-4e4c-42bf-889d-c90d041a7c0a"/>
					<property name="com.jaspersoft.studio.unit.height" value="px"/>
				</reportElement>
				<textElement>
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression><![CDATA[new SimpleDateFormat("dd/MM/yyyy").format($F{fecha_inicio})]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="477" y="0" width="83" height="13" uuid="152a3d4b-a297-4917-9353-ba71c7832174">
					<property name="com.jaspersoft.studio.spreadsheet.connectionID" value="291997ea-3e8e-45d3-8117-78c78f44bde6"/>
				</reportElement>
				<textElement>
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression><![CDATA[($F{descripcion}.equals("Faltas")) ? "Falta Injustificada" : $F{descripcion}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<pageFooter>
		<band height="13" splitType="Stretch">
			<textField>
				<reportElement x="530" y="0" width="26" height="13" uuid="78d1bd00-ddba-4ac3-8c82-145b1eac39df">
					<property name="com.jaspersoft.studio.unit.height" value="px"/>
				</reportElement>
				<textFieldExpression><![CDATA[$V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
		</band>
	</pageFooter>
	<summary>
		<band height="33" splitType="Stretch">
			<textField>
				<reportElement x="39" y="0" width="230" height="13" uuid="63acb84c-fe19-4de9-8ec6-c6342a842133">
					<property name="com.jaspersoft.studio.unit.height" value="px"/>
				</reportElement>
				<textElement>
					<font isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA["Total de Inasisistencias Reportadas: " +  $V{REPORT_COUNT}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="40" y="20" width="230" height="13" uuid="b49535b7-db2b-4084-9a65-5bad8121b95b">
					<property name="com.jaspersoft.studio.unit.height" value="px"/>
				</reportElement>
				<textElement>
					<font isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA["Total de Trabajadores Reportados: " +  $V{cuentaTrabajadores}]]></textFieldExpression>
			</textField>
		</band>
	</summary>
</jasperReport>
